  {% extends "base.html" %}
  {% block content %}
  <div class="row page_wrap">
    <!-- page wrap -->
    <div class="twelve columns">
      <!-- page wrap -->

      <div class="row">
        <div class="twelve columns">
         <div class="heading_dots"><h1 class="heading_supersize" style="margin-bottom:5px"><span class="heading_center_bg">munchti.me</span></h1></div>
       </div>
     </div>

     <div class="row" style="padding-top: 10px">

      <ul class="accordion" data-accordion>

        <li class="accordion-navigation">
          <a href="#panel2a"><center>I want food! </center></a>
          <div id="panel2a" class="content">
            <form data-abide id="orderForm">
              <div class="row">
                <div class="9 columns">
                  <div class="row">
                    <div class="small-3 columns">
                      <label for="right-label" class="right inline">My Name:</label>
                    </div>
                    <div class="small-9 columns">
                      <input type="text" id="right-label" name="name" placeholder="John Doe (required)" required >
                    </div>
                  </div>
                  <div class="row">
                    <div class="small-3 columns">
                      <label for="right-label" class="right inline">I want:</label>
                    </div>
                    <div class="small-9 columns">
                      <input type="text" id="right-label" name="food" placeholder="A Hamburger (required)" required>
                    </div>
                  </div>
                  <div class="row">
                    <div class="small-3 columns">
                      <label for="right-label" class="right inline">From:</label>
                    </div>
                    <div class="small-9 columns">
                      <input type="text" id="right-label" name="source" placeholder="In-n-Out">
                    </div>
                  </div>
                  <div class="row">
                    <div class="small-3 columns">
                      <label for="right-label" class="right inline">Deliver it to:</label>
                    </div>
                    <div class="small-9 columns">
                      <input type="text" id="right-label" name="destination" placeholder="12 Milk Street (required)" required>
                    </div>
                  </div>
                  <div class="row">
                    <div class="small-3 columns">
                      <label for="right-label" class="right inline">Deliver it by:</label>
                    </div>
                    <div class="small-9 columns">
                      <input type="text" id="right-label" name = "time" placeholder="10:00:00 (required)" required pattern="time">
                    </div>
                  </div>
                  
                 <div class="row">
                  <div class="small-3 columns">
                    <label for="right-label" class="right inline">I'll pay:</label>
                  </div>
                  <div class="small-9 columns">
                   <input type="text" name="payment" placeholder="3 swipes (required)" required />
                 </div>
               </div>

               <div class="row">
                <div class="small-3 columns">
                  <label for="right-label" class="right inline">Means of contact</label>
                </div>
                <div class="small-9 columns">
                 <input type="text" name="contact" placeholder="meme@gmail.com or 123-456-7890 (required)" required/>
               </div>
             </div>
             <div class="row">
                <div class="small-3 columns">
                  <label for="right-label" class="right inline">Any additional info:</label>
                </div>
                <div class="small-9 columns">
                 <input type="text" name="info"/>
               </div>
             <div id="orderError">
             </div>
             <div class="row">
            </div>

          </div>

        </div>
        </form>
        <br>
        <div id="orderError"><center><input class="button round" type="submit" id="submit"></center>
      </div>
    </div>
  </li>

  <li class="accordion-navigation">
    <a href="#panel3a" id="ordersRequest"><center>I want to deliver!</center></a>
    <center><br><div id="panel3a" class="content">
    </div></center>
    <script id="ordersTemplate" type="x-tmpl-mustache">
      {% raw %}
        {{#items}}
      <a class="list-group-item order" id="{{ href }}" href="#" >
        <strong>
          {{ topic }} 
        </strong>
        <br>
        <small>
          {{ dateTime }}
        </small>
      </a>
      {{/items}}
      {{^items}}
      <a class="list-group-item" href="#"> 
        <strong>
          Nothing here yet.
        </strong>
      </a>
        {{/items}}
      {% endraw %}
    </script>
    <div id="panel3a" class="nav">
    </div>
  </li>
</ul>

</div>

<div class="row">
  <div class="twelve columns">
    <ul id="menu3" class="footer_menu horizontal">
      <li class=""><a href="\">Refresh</a></li>
    </ul>
  </div>
</div>
</div>

</div><!-- end page wrap) -->

<script> 
  var isuck=true;

document.getElementById("ordersRequest").addEventListener("click", processClick);
  
  function processClick() 
  {
      if(isuck)
      {
        isuck = false;

        for(a = 1; a < 10; a++)
        {
          $.get("api/post/"+a, function(info) {
            if(! $.isEmptyObject(info))
            {
// var $newdiv1 = $("<a href:'#' class:'accordion-navigation' id:'posting'+a>" ),
//   newdiv2 = document.createElement( "li" );


            $("#panel3a").append($("<a>", {class:"button secondary", href:info.id}).text(info.food + " from " + info.source + " at around "
             + (info.time.substring(info.time.indexOf("T") + 1, info.time.lastIndexOf(":"))))).wrap("<p></p>");
            $("#panel3a").append($("<br />"));
            // }

            // $("#panel3a").wrap("<div li class='accordion-navigation' id='posting'+a>").text(info.food + " from " + info.source + " at around "
            //  + (info.time.substring(info.time.indexOf("T") + 1, info.time.lastIndexOf(":")))  + " for " + info.payment );

              // document.getElementById("posting"+a).addEventListener("click", function() {
                //does something like loading the rest of the data
                //i don't knwow foundation
                  // Console.log("fu");
              // });
            
            }
            // console.log(data);
          // });
        });
      }
      // document.getElementById("panel3a").innerHTML = _____________; <!--HTTP GET REQUEST, FORMAT -->
  }
}

</script>
{% endblock %}